{"version":3,"sources":["index.js"],"names":["API","makeLetters","letters","map","letter","join","makeTerms","terms","term","position","title","toLowerCase","tags","tag","children","inView","elem","boundingClientRect","getBoundingClientRect","top","bottom","window","innerHeight","document","documentElement","clientHeight","scrollNav","querySelector","scrollTop","offsetTop","setupActiveLetter","elems","classList","remove","navItem","innerText","add","setupStickyLetters","mainEl","navEl","addEventListener","navTop","style","setupLetterClicks","querySelectorAll","forEach","anchor","request","fn","fetch","then","r","json","data","call","render","letterTemplate","termTemplate","innerHTML"],"mappings":";;;AA4FA,aAAA,SAAA,EAAA,GAAA,OAAA,EAAA,IAAA,EAAA,IAAA,IAAA,SAAA,IAAA,MAAA,IAAA,UAAA,mDAAA,SAAA,EAAA,GAAA,GAAA,OAAA,YAAA,OAAA,IAAA,uBAAA,OAAA,UAAA,SAAA,KAAA,GAAA,OAAA,MAAA,KAAA,GAAA,SAAA,EAAA,GAAA,GAAA,MAAA,QAAA,GAAA,CAAA,IAAA,IAAA,EAAA,EAAA,EAAA,IAAA,MAAA,EAAA,QAAA,EAAA,EAAA,OAAA,IAAA,EAAA,GAAA,EAAA,GAAA,OAAA,GA5FA,QAAA,eAEA,IAAMA,EAAM,mDAENC,EAAc,SAAAC,GAGdA,MAAAA,oEAAAA,OAAAA,EAAQC,IAAI,SAAAC,GAAwBA,MAAAA,cAAAA,OAAAA,EAAiCA,4BAAAA,OAAAA,EAAkBA,aAAAA,OAAAA,EAArE,eAAwFC,KAAK,IAH1F,sBAOrBC,EAAY,SAAAC,GAGZA,MAAAA,iEAAAA,OAAAA,EAAMJ,IAAI,SAAAK,GACGA,MAAAA,0BAAAA,OAAkB,OAAlBA,EAAKC,SAA2BD,OAAAA,OAAAA,EAAKE,MAAM,GAAGC,cAA0B,YAAA,KAE7EH,oEAAAA,OAAAA,EAAKE,MAEHF,4DAAAA,OAAAA,EAAKI,KAAKT,IAAI,SAAAU,GAAcA,MAAAA,OAAAA,OAAAA,EAAX,WAAuBR,KAAK,IAGtBG,+EAAAA,OAAAA,EAAKM,SARxB,2CAURT,KAAK,IAbM,uBAiBvB,SAASU,EAAQC,GACTC,IAAAA,EAAqBD,EAAKE,wBAC5BD,OAAAA,EAAmBE,KAAO,GAC5BF,EAAmBG,SAAWC,OAAOC,aAAeC,SAASC,gBAAgBC,cAOjF,SAASC,EAAWV,GACdD,EAAOC,KACTO,SAASI,cAAc,YAAYC,UAAYZ,EAAKa,WAIxD,SAASC,EAAmBC,GAC1BA,EAAM5B,IAAI,SAASa,GACdD,GAAAA,EAAOC,GAAO,CAC0B,OAAtCO,SAASI,cAAc,YACxBJ,SAASI,cAAc,WAAWK,UAAUC,OAAO,UAE/CC,IAAAA,EAAUX,SAASI,cAAkBX,IAAAA,OAAAA,EAAKmB,UAAU,KAC1DD,EAAQF,UAAUI,IAAI,UACtBV,EAAUQ,MAKhB,SAASG,EAAoBN,GACrBO,IAAAA,EAASf,SAASI,cAAc,aAChCY,EAAQhB,SAASI,cAAc,YAErCJ,SAASiB,iBAAiB,SAAU,WAC5BC,IAAAA,EAASH,EAAOpB,wBAAwBC,IAAM,EAAImB,EAAOpB,wBAAwBC,IAAM,EAC7FoB,EAAMG,MAAMvB,IAAMsB,EAClBX,EAAkBC,KAItB,SAASY,IACapB,EAAAA,SAASqB,iBAAiB,eACtCC,QAAQ,SAAAC,GACdA,EAAON,iBAAiB,QAAS,WACU,OAAtCjB,SAASI,cAAc,YACxBJ,SAASI,cAAc,WAAWK,UAAUC,OAAO,UAErDa,EAAOd,UAAUI,IAAI,cAK3B,SAASW,EAASC,GACTC,OAAAA,MAAMjD,GACVkD,KAAK,SAAAC,GAAKA,OAAAA,EAAEC,SACZF,KAAK,SAAAG,GAAQL,OAAAA,EAAGM,KAAK,KAAMD,KAGhC,SAASE,EAAyB,GAAjBrD,IAAAA,EAAAA,EAAAA,QAASK,EAAAA,EAAAA,MAClBiD,EAAiBvD,EAAYC,GAC7BuD,EAAenD,EAAUC,GAC/BgB,SAASI,cAAc,QAAQ+B,UAAYF,EAAiBC,EAG9DV,EAAQQ,GACLL,KAAK,WACEnB,IAAAA,EAAYR,EAAAA,SAASqB,iBAAiB,oBAC5Cd,EAAkBC,GAClBM,EAAmBN,GACnBY","file":"src.c5f58b47.js","sourceRoot":"../src","sourcesContent":["import './index.css';\n\nconst API = 'https://pd-spellbook-api.richardrcargill.now.sh/';\n\nconst makeLetters = letters => \n`<nav id=\"letters\" class=\"letters\">\n  <ul class=\"no-style\">\n    ${letters.map(letter => `<li><a id=\"${letter}\" class=\"letter\" href=\"#${letter}_target\">${letter}</a></li>`).join('')}\n  </ul>\n</nav>`;\n\nconst makeTerms = terms =>\n`<main id=\"terms\" class=\"terms\">\n  <ul class=\"no-style\">\n    ${terms.map(term => `<li>\n        <article ${term.position !== null ? `id=\"${term.title[0].toLowerCase()}_target\"` : null} class=\"term\">\n          <h2 class=\"term__title\">\n            ${term.title}\n            <ul class=\"no-style tags\">\n              ${term.tags.map(tag => `<li>${tag}</li>`).join('')}\n            </ul>\n          </h2>\n          <div class=\"term__content\">${term.children}</div>\n        </article>\n    </li>`).join('')}\n  </ul>\n</main>`;\n\nfunction inView (elem) {\n  const boundingClientRect = elem.getBoundingClientRect();\n  if (boundingClientRect.top >= 0 &&\n    boundingClientRect.bottom <= (window.innerHeight || document.documentElement.clientHeight)) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nfunction scrollNav (elem) {\n  if(!inView(elem)) {\n    document.querySelector('#letters').scrollTop = elem.offsetTop;\n  }\n}\n\nfunction setupActiveLetter (elems) {\n  elems.map(function(elem) {\n    if(inView(elem)) {\n      if(document.querySelector('.active') !== null) {\n        document.querySelector('.active').classList.remove('active');\n      }\n      const navItem = document.querySelector(`#${elem.innerText[0]}`);\n      navItem.classList.add('active');\n      scrollNav(navItem);\n    }\n  });\n}\n\nfunction setupStickyLetters (elems) {\n  const mainEl = document.querySelector('#terms ul');\n  const navEl = document.querySelector('#letters');\n\n  document.addEventListener('scroll', function() {\n    const navTop = mainEl.getBoundingClientRect().top > 0 ? mainEl.getBoundingClientRect().top : 0;\n    navEl.style.top = navTop;\n    setupActiveLetter(elems);\n  });\n}\n\nfunction setupLetterClicks () {\n  const anchors = [...document.querySelectorAll('#letters a')];\n  anchors.forEach(anchor => {\n    anchor.addEventListener('click', () => {\n      if(document.querySelector('.active') !== null) {\n        document.querySelector('.active').classList.remove('active');\n      }\n      anchor.classList.add('active')\n    });\n  });\n}\n\nfunction request (fn) {\n  return fetch(API)\n    .then(r => r.json())\n    .then(data => fn.call(null, data));\n}\n\nfunction render({letters, terms}) {\n  const letterTemplate = makeLetters(letters);\n  const termTemplate = makeTerms(terms);\n  document.querySelector('#app').innerHTML = letterTemplate + termTemplate;\n}\n\nrequest(render)\n  .then(() => {\n    const elems = [...document.querySelectorAll('[id$=\"_target\"]')];\n    setupActiveLetter(elems);\n    setupStickyLetters(elems);\n    setupLetterClicks();\n  })\n"]}