{"version":3,"sources":["index.js"],"names":["API","APP_NODE","document","querySelector","makeNav","makeHeader","makeLetters","letters","map","letter","join","makeTerms","terms","term","key","position","title","toLowerCase","tags","tag","children","inView","elem","boundingClientRect","getBoundingClientRect","top","bottom","window","innerHeight","documentElement","clientHeight","scrollNav","desktopQuery","matchMedia","matches","scrollTop","offsetTop","scrollLeft","offsetLeft","setupActiveLetter","elems","classList","remove","navItem","innerText","add","setupStickyLetters","mainEl","navEl","addEventListener","navTop","style","setupLetterClicks","querySelectorAll","forEach","anchor","lastTargetElem","elemsLength","length","result","i","previousKey","parseInt","getAttribute","groupedElems","previousElems","request","successFn","failureFn","fetch","then","r","json","data","call","catch","error","successfulRender","navTemplate","letterTemplate","termTemplate","innerHTML","failureRender"],"mappings":";AA2KA,SAAA,EAAA,GAAA,OAAA,EAAA,IAAA,EAAA,IAAA,IAAA,SAAA,IAAA,MAAA,IAAA,UAAA,mDAAA,SAAA,EAAA,GAAA,GAAA,OAAA,YAAA,OAAA,IAAA,uBAAA,OAAA,UAAA,SAAA,KAAA,GAAA,OAAA,MAAA,KAAA,GAAA,SAAA,EAAA,GAAA,GAAA,MAAA,QAAA,GAAA,CAAA,IAAA,IAAA,EAAA,EAAA,EAAA,IAAA,MAAA,EAAA,QAAA,EAAA,EAAA,OAAA,IAAA,EAAA,GAAA,EAAA,GAAA,OAAA,GA3KA,IAAMA,EAAM,mDACNC,EAAWC,SAASC,cAAc,QAElCC,EAAU,WAAA,MAAA,kOAMVC,EAAa,WAAA,MAAA,8VAQbC,EAAc,SAAAC,GAGZA,MAAAA,wEAAAA,OAAAA,EACCC,IACC,SAAAC,GACgBA,MAAAA,cAAAA,OAAAA,EAAiCA,4BAAAA,OAAAA,EAAkBA,aAAAA,OAAAA,EAD7D,eAGPC,KAAK,IARa,0BAYrBC,EAAY,SAAAC,GAEZP,MAAAA,wCAAAA,OAAAA,IAEAO,UAAAA,OAAAA,EAEEA,gCAAAA,OAAAA,EACCJ,IACC,SAACK,EAAMC,GAELD,MAAAA,4BAAAA,OAAkB,OAAlBA,EAAKE,SACMF,OAAAA,OAAAA,EAAKG,MAAM,GAAGC,cACrB,YAAA,KAEYH,8CAAAA,OAAAA,EACZD,0CAAAA,OAAAA,EAAKG,MAEHH,gEAAAA,OAAAA,EAAKK,KAAKV,IAAI,SAAAW,GAAcA,MAAAA,OAAAA,OAAAA,EAAX,WAAuBT,KAAK,IAGtBG,qFAAAA,OAAAA,EAAKO,SAZpC,+CAgBDV,KAAK,IAEJ,eAAA,6EA1Ba,gBA8BvB,SAASW,EAAOC,GACRC,IAAAA,EAAqBD,EAAKE,wBAE9BD,OAAAA,EAAmBE,KAAO,GAC1BF,EAAmBG,SAChBC,OAAOC,aAAe1B,SAAS2B,gBAAgBC,cAQtD,SAASC,EAAUT,GACXU,IAAAA,EAAeL,OAAOM,WAAW,uBAElCZ,EAAOC,IAASU,EAAaE,QAChChC,SAASC,cAAc,YAAYgC,UAAYb,EAAKc,UAEpDlC,SAASC,cAAc,YAAYkC,WAAaf,EAAKgB,WAIzD,SAASC,EAAkBC,GACzBA,EAAMhC,IAAI,SAASc,GACbD,GAAAA,EAAOC,GAAO,CAC0B,OAAtCpB,SAASC,cAAc,YACzBD,SAASC,cAAc,WAAWsC,UAAUC,OAAO,UAE/CC,IAAAA,EAAUzC,SAASC,cAAkBmB,IAAAA,OAAAA,EAAKsB,UAAU,KAC1DD,EAAQF,UAAUI,IAAI,UACtBd,EAAUY,MAKhB,SAASG,EAAmBN,GACpBO,IAAAA,EAAS7C,SAASC,cAAc,aAChC6C,EAAQ9C,SAASC,cAAc,YAC/B6B,EAAeL,OAAOM,WAAW,sBAEvC/B,SAAS+C,iBAAiB,SAAU,WAC9BjB,GAAAA,EAAaE,QAAS,CAClBgB,IAAAA,EACJH,EAAOvB,wBAAwBC,IAAM,GACjCsB,EAAOvB,wBAAwBC,IAC/B,GACNuB,EAAMG,MAAM1B,IAAMyB,OAElBF,EAAMG,MAAM1B,IAAM,EAEpBc,EAAkBC,KAItB,SAASY,IACalD,EAAAA,SAASmD,iBAAiB,eACtCC,QAAQ,SAAAC,GACdA,EAAON,iBAAiB,QAAS,WACW,OAAtC/C,SAASC,cAAc,YACzBD,SAASC,cAAc,WAAWsC,UAAUC,OAAO,UAErDa,EAAOd,UAAUI,IAAI,cAK3B,SAASW,EAAehB,GAIjB,IAHCiB,IAAAA,EAAcjB,EAAMkB,OACtBC,EAAS,GAEJC,EAAI,EAAGA,EAAIH,EAAaG,IAAK,CAC9BC,IAAAA,EAAcC,SAAStB,EAAMoB,GAAGG,aAAa,YAAa,IAAM,EAChEzC,EAAOpB,SAASC,cAA4B0D,cAAAA,OAAAA,EAAlD,OAEIvC,IACFqC,EAAaA,GAAAA,OAAAA,EAAAA,GAAQrC,CAAAA,KAIlBqC,OAAAA,EAGT,SAASK,IACDxB,IAAAA,EAAYtC,EAAAA,SAASmD,iBAAiB,uBACtCY,EAAgBT,EAAehB,GAE1BA,MAAAA,GAAAA,OAAAA,EAAAA,GAAUyB,EAAAA,IAGvB,SAASC,EAAQC,EAAWC,GACnBC,OAAAA,MAAMrE,GACVsE,KAAK,SAAAC,GAAKA,OAAAA,EAAEC,SACZF,KAAK,SAAAG,GAAQN,OAAAA,EAAUO,KAAK,KAAMD,KAClCE,MAAM,SAAAC,GAASR,OAAAA,EAAUM,KAAK,KAAME,KAGzC,SAASC,EAAqC,GAAlBtE,IAAAA,EAAAA,EAAAA,QAASK,EAAAA,EAAAA,MAC7BkE,EAAc1E,IACd2E,EAAiBzE,EAAYC,GAC7ByE,EAAerE,EAAUC,GAE/BX,EAASgF,UAAYH,EAAcC,EAAiBC,EAGtD,SAASE,IACDJ,IAAAA,EAAc1E,IACd4E,EAAerE,IAErBV,EAASgF,UAAYH,EAAcE,EAGrCd,EAAQW,EAAkBK,GAAeZ,KAAK,WACtC9B,IAAAA,EAAQwB,IACdzB,EAAkBC,GAClBM,EAAmBN,GACnBY","file":"src.afca1836.js","sourceRoot":"../src","sourcesContent":["const API = \"https://pd-spellbook-api.richardrcargill.now.sh/\";\nconst APP_NODE = document.querySelector(\"#app\");\n\nconst makeNav = () =>\n  `<nav class=\"nav\">\n    <a href=\"mailto:mailto:annalisavalente@pm.me\" class=\"nav__item button button--ghost\">Contact me</a>\n    <a href=\"https://annalisa.space/\" target=\"_blank\" class=\"nav__item button\">About</a>\n  </nav>`;\n\nconst makeHeader = () =>\n  `<header class=\"header\">\n    <h1 class=\"header__title\">Product designer spellbook</h1>\n    <div class=\"term__content\">\n      <p>Terms that I use everyday as a Product designer. This glossary is for technical and non-technical people. If you think something is missing or you want to contribute feel free to ping me!</p>\n    </div>\n  </header>`;\n\nconst makeLetters = letters =>\n  `<nav id=\"letters\" class=\"letters\">\n    <ul class=\"no-style\">\n      ${letters\n        .map(\n          letter =>\n            `<li><a id=\"${letter}\" class=\"letter\" href=\"#${letter}_target\">${letter}</a></li>`\n        )\n        .join(\"\")}\n    </ul>\n  </nav>`;\n\nconst makeTerms = terms =>\n  `<main id=\"terms\" class=\"terms\">\n    ${makeHeader()}\n    ${\n      terms\n        ? `<ul class=\"no-style\">\n      ${terms\n        .map(\n          (term, key) => `<li>\n          <article ${\n            term.position !== null\n              ? `id=\"${term.title[0].toLowerCase()}_target\"`\n              : null\n          } class=\"term\">\n            <h2 data-key=\"${key}\" class=\"term__title\">\n              ${term.title}\n              <ul class=\"no-style tags\">\n                ${term.tags.map(tag => `<li>${tag}</li>`).join(\"\")}\n              </ul>\n            </h2>\n            <div class=\"term__content\">${term.children}</div>\n          </article>\n      </li>`\n        )\n        .join(\"\")}\n    </ul>`\n        : '<p style=\"color:red\" class=\"term__content\">There was a problem loading</p>'\n    }\n  </main>`;\n\nfunction inView(elem) {\n  const boundingClientRect = elem.getBoundingClientRect();\n  if (\n    boundingClientRect.top >= 0 &&\n    boundingClientRect.bottom <=\n      (window.innerHeight || document.documentElement.clientHeight)\n  ) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nfunction scrollNav(elem) {\n  const desktopQuery = window.matchMedia(\"(min-width: 600px)\");\n\n  if (!inView(elem) && desktopQuery.matches) {\n    document.querySelector(\"#letters\").scrollTop = elem.offsetTop;\n  } else {\n    document.querySelector(\"#letters\").scrollLeft = elem.offsetLeft;\n  }\n}\n\nfunction setupActiveLetter(elems) {\n  elems.map(function(elem) {\n    if (inView(elem)) {\n      if (document.querySelector(\".active\") !== null) {\n        document.querySelector(\".active\").classList.remove(\"active\");\n      }\n      const navItem = document.querySelector(`#${elem.innerText[0]}`);\n      navItem.classList.add(\"active\");\n      scrollNav(navItem);\n    }\n  });\n}\n\nfunction setupStickyLetters(elems) {\n  const mainEl = document.querySelector(\"#terms ul\");\n  const navEl = document.querySelector(\"#letters\");\n  const desktopQuery = window.matchMedia(\"(min-width: 600px)\");\n\n  document.addEventListener(\"scroll\", function() {\n    if (desktopQuery.matches) {\n      const navTop =\n        mainEl.getBoundingClientRect().top > 18\n          ? mainEl.getBoundingClientRect().top\n          : 18;\n      navEl.style.top = navTop;\n    } else {\n      navEl.style.top = 0;\n    }\n    setupActiveLetter(elems);\n  });\n}\n\nfunction setupLetterClicks() {\n  const anchors = [...document.querySelectorAll(\"#letters a\")];\n  anchors.forEach(anchor => {\n    anchor.addEventListener(\"click\", () => {\n      if (document.querySelector(\".active\") !== null) {\n        document.querySelector(\".active\").classList.remove(\"active\");\n      }\n      anchor.classList.add(\"active\");\n    });\n  });\n}\n\nfunction lastTargetElem(elems) {\n  const elemsLength = elems.length;\n  let result = [];\n\n  for (let i = 0; i < elemsLength; i++) {\n    const previousKey = parseInt(elems[i].getAttribute(\"data-key\"), 10) - 1;\n    const elem = document.querySelector(`[data-key=\"${previousKey}\"]`);\n\n    if (elem) {\n      result = [...result, elem];\n    }\n  }\n\n  return result;\n}\n\nfunction groupedElems() {\n  const elems = [...document.querySelectorAll('[id$=\"_target\"] h2')];\n  const previousElems = lastTargetElem(elems);\n\n  return [...elems, ...previousElems];\n}\n\nfunction request(successFn, failureFn) {\n  return fetch(API)\n    .then(r => r.json())\n    .then(data => successFn.call(null, data))\n    .catch(error => failureFn.call(null, error));\n}\n\nfunction successfulRender({ letters, terms }) {\n  const navTemplate = makeNav();\n  const letterTemplate = makeLetters(letters);\n  const termTemplate = makeTerms(terms);\n\n  APP_NODE.innerHTML = navTemplate + letterTemplate + termTemplate;\n}\n\nfunction failureRender() {\n  const navTemplate = makeNav();\n  const termTemplate = makeTerms();\n\n  APP_NODE.innerHTML = navTemplate + termTemplate;\n}\n\nrequest(successfulRender, failureRender).then(() => {\n  const elems = groupedElems();\n  setupActiveLetter(elems);\n  setupStickyLetters(elems);\n  setupLetterClicks();\n});\n"]}